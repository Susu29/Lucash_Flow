{% extends "accounting/master.html" %} {% block content %}

<div class="container mt-4">
  <h1 class="display-6" >{{party_type}} table</h1>
  <table class="table table-bordered" ; id="thirdpartyTable">
    <thead>
      <tr>
        <th style="width: 1%;">Code</th>
        <th>Name</th>
        <th>Email</th>
        <th style="white-space: nowrap;overflow: hidden; text-overflow: ellipsis;">Address</th>
        <th style="width: 1%;">Phone</th>
        <th style="width: 1%;">Updated</th>
      </tr>
    </thead>
    <tfoot>
      <tr>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
      </tr>
    </tfoot>
    <tbody>
    {% for party in thirdparty %}
    
      <tr>
        <td>{{party.code}}</td>
        <td>{{party.name}}</td>
        <td>{{party.email}}</td>
        <td style="white-space: nowrap;overflow: hidden; text-overflow: ellipsis;">{{party.address}}</td>
        <td>{{party.phone}}</td>
        <td>{{party.updated_at|date:"d/m/Y" }}</td>
      </tr>
    
    {% endfor %}
    </tbody>
  </table>
</div>

{% if party_type == "Suppliers" %}
<div class="d-flex justify-content-center gap-3 mb-3">
  <form action = "{% url 'accounting:add_suppliers' %}">
    <input class="btn btn-primary" type="submit" value="New Supplier"/> 
  </form>
  <form action = "{% url 'accounting:select_suppliers' 'update' %}">
    <input class="btn btn-primary" type="submit" value="Update Supplier"/> 
  </form>
  <form action = "{% url 'accounting:select_suppliers' 'delete' %}">
    <input class="btn btn-primary" type="submit" value="Delete Supplier"/> 
  </form>
</div>
{% endif %}

{% if party_type == "Customers" %}
<div class="d-flex justify-content-center gap-3 mb-3">
  <form action = "{% url 'accounting:add_customers' %}">
    <input class="btn btn-primary" type="submit" value="New Customer"/> 
  </form>
  <form action = "{% url 'accounting:select_customers' 'update' %}">
    <input class="btn btn-primary" type="submit" value="Update Customer"/> 
  </form>
  <form action = "{% url 'accounting:select_customers' 'delete' %}">
    <input class="btn btn-primary" type="submit" value="Delete Customer"/> 
  </form>
</div>
{% endif %}

  <style>
  #thirdpartyTable tfoot input {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    padding: 2px 6px;
    font-size: 0.85rem;
    white-space: nowrap;
  }

  #ledgerTable tfoot th {
    padding: 4px;
  }
  </style>


  <script>

  $(document).ready(function () {

    // Add inputs to each footer cell (bottom of table)
      $('#thirdpartyTable tfoot th').each( function () {
          var title = $('#thirdpartyTable thead th').eq( $(this).index() ).text();
          $(this).html( '<input type="text" placeholder="Search '+title+'" />' );
      } );

    // Initialize DataTable ONCE
    var table = $('#thirdpartyTable').DataTable(
        );

      table.columns().every( function () {
          var that = this;
  
          $( 'input', this.footer() ).on( 'keyup change', function () {
              that
                  .search( this.value )
                  .draw();
          } );
      } );
  } );
  </script>



{% endblock %}

